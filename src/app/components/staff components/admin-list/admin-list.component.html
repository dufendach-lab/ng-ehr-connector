<div class="list-container" fxFlex="800px" fxFlex.lt-sm="100%">
  <div class="box-buttons">
    <div></div>
    <button class="mat-primary" mat-raised-button [routerLink]="'../add'">Add New Patient</button>
  </div>
  <!--  Patient Search Card - Autocomplete fills last name  -->
  <mat-card>
    <form fxLayout="column" (ngSubmit)="onSubmit()">
      <mat-form-field>
        <mat-label>Search</mat-label>
        <input type="text"
               placeholder="Search by last name"
               matInput
               [formControl]="myControl"
               [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let option of filteredOptions | async" [value]="option.lastName">
            {{ option.lastName }}, {{ option.firstName }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </form>

    <button mat-raised-button class="mat-primary" (click)="onSubmit()">Edit patient profile</button>

  </mat-card>

  <!--  Generates every patient in the firestore  -->
  <h2>List of patients: </h2>
  <div *ngFor="let patient of allPatients | async">
    <div *ngIf="patient.roles.includes('Patient')">
      <mat-card>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <div class="pat-card-scope">
            <div>Name: {{patient.firstName}} {{patient.lastName}}</div>
            <div>Phone Number: {{ patient.phone }}</div>
            <div>Mother's DoB: {{patient.MotherDoB.toDate() | date: "MM/dd/yyyy"}}</div>
          </div>
          <div>
            <button mat-stroked-button (click)="editPatient(patient.docName)">Edit</button>
          </div>
        </div>
      </mat-card>
      <br />
    </div>
  </div>
</div>
